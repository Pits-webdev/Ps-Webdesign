---
import PageloadLogo from "../assets/svg/ps-logo.svg";
---

<div
   id="loader-wrapper"
   class="fixed inset-0 z-100 flex items-center justify-center bg-background text-primary"
>
   <svg
      width="300"
      height="128"
      viewBox="0 0 625 267"
      class="w-[80vw] max-w-[500px]"
      xmlns="http://www.w3.org/2000/svg"
   >
      <defs>
         <path
            id="path-1"
            d="M0,0l235.087,0c38.754,-1.292 59.316,34.871 57.725,72.113c-1.598,37.412 -24.042,65.027 -59.468,65.362l-145.624,0.108l-0.108,45.379l116.451,0.588l0.172,83.116l-204.237,0l0,-83.566l79.006,0l0,-99.834l-79.131,0l0.125,-83.266Zm88.371,83.412l-0.461,45.066l148.092,0.461c31.242,-8.091 26.105,-44.256 1.382,-45.855l-149.013,0.329Z"
         ></path>
         <path
            id="path-2"
            d="M625,0l-224.355,-0.034c-93.328,1.025 -87.242,138.617 -13.279,137.315l183.781,0.539c22.032,1.834 21.436,44.471 -0.135,45.406l-237.187,-0.497l0,83.937l241.365,0c64.391,-1.639 69.106,-135.863 -3.618,-138.213l-183.84,0.552c-24.377,-1.928 -28.132,-44.949 -0.525,-45.743l237.792,0.168l0,-83.43Z"
         ></path>

         <clipPath id="fill-mask">
            <!-- Die Maske deckt den ganzen Bereich ab -->
            <rect id="mask-rect" x="0" y="0" width="625" height="267"></rect>
         </clipPath>
      </defs>

      <!-- HINTERGRUND: Outline (Immer sichtbar) -->
      <g id="outline-layer" fill="none" stroke="currentColor" stroke-width="2">
         <use href="#path-1"></use>
         <use href="#path-2"></use>
      </g>

      <!-- VORDERGRUND: Fill (Wird animiert) -->
      <g
         id="fill-layer"
         fill="currentColor"
         stroke="none"
         clip-path="url(#fill-mask)"
      >
         <use href="#path-1"></use>
         <use href="#path-2"></use>
      </g>
   </svg>
</div>

<script>
   import { gsap } from "gsap";
   import { CustomEase } from "gsap/CustomEase";

   gsap.registerPlugin(CustomEase);

   const wrapper = document.getElementById("loader-wrapper") as HTMLElement;
   const maskRect = document.getElementById("mask-rect");

   const tl = gsap.timeline({
      defaults: { ease: "power2.inOut" },
      onComplete: () => {
         gsap.to(wrapper, {
            opacity: 0,
            duration: 0.5,
            onComplete: () => {
               wrapper.style.display = "none";
            },
         });
      },
   });

   // 1. SETUP: Maske oben starten (HÃ¶he 0)
   gsap.set(maskRect, {
      scaleY: 0, // Y-Achse auf 0
      transformOrigin: "top center", // WICHTIG: Ursprung oben
   });

   // 2. ANIMATION: Nach unten wachsen
   tl.to(maskRect, {
      scaleY: 1, // Y-Achse auf 100%
      duration: 3.0,
      ease: CustomEase.create("custom", "0.97, 0.01, 0.76, 0.99"),
      //ease: "power4.inOut",
   });
</script>
