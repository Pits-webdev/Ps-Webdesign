<button
   id="audio-control"
   class="w-12 h-12 bg-black/80 backdrop-blur-md border border-white/20 rounded-full flex items-center justify-center transition-all duration-300 hover:border-amber-400 group shadow-lg"
   aria-label="Musik abspielen"
>
   <!-- Container: items-center für vertikales Zentrieren -->
   <div
      id="wave-container"
      class="flex items-center justify-center gap-1.5 h-6 w-8"
   >
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
      <!-- Hier ist der 5. Balken -->
   </div>
</button>

<audio id="bg-music" loop preload="auto">
   <source src="/Mountkid-Dino.mp3" type="audio/mpeg" />
</audio>

<script>
   const button = document.getElementById("audio-control") as HTMLButtonElement;
   const container = document.getElementById("wave-container") as HTMLElement;
   const audio = document.getElementById("bg-music") as HTMLAudioElement;

   audio.volume = 0.3;
   let isPlaying = false;

   function togglePlay() {
      if (isPlaying) {
         audio.pause();
         isPlaying = false;
         container.classList.remove("playing");
         button.classList.remove("border-amber-400");
      } else {
         const playPromise = audio.play();
         if (playPromise !== undefined) {
            playPromise
               .then(() => {
                  isPlaying = true;
                  container.classList.add("playing");
                  button.classList.add("border-amber-400");
               })
               .catch((error) => console.log("Autoplay blockiert:", error));
         }
      }
   }

   button.addEventListener("click", togglePlay);
</script>

<style>
   /* Grundzustand: Kleine Punkte */
   .bar {
      width: 1px;
      height: 4px;
      background-color: white;
      border-radius: 9999px;
      transition: all 0.3s ease;
   }

   /* Animation starten */
   .playing .bar {
      animation: equalizer 1s ease-in-out infinite;
   }

   /* Die Bewegung (von der Mitte aus wachsend) */
   @keyframes equalizer {
      0% {
         height: 4px;
      }
      50% {
         height: 16px;
      } /* Max Höhe etwas angepasst für 5 Balken */
      100% {
         height: 4px;
      }
   }

   /* Rhythmus für 5 Balken */
   .playing .bar:nth-child(1) {
      animation-duration: 1s;
   }
   .playing .bar:nth-child(2) {
      animation-duration: 0.8s;
   }
   .playing .bar:nth-child(3) {
      animation-duration: 1.2s;
   } /* Mitte am langsamsten */
   .playing .bar:nth-child(4) {
      animation-duration: 0.9s;
   }
   .playing .bar:nth-child(5) {
      animation-duration: 1.1s;
   }
</style>
